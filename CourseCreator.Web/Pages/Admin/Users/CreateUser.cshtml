@page
@using CourseCreator.Datalayer.Entities.User;
@model CourseCreator.Web.Pages.Admin.Users.CreateUserModel
@{
    ViewData["Title"] = "Create-User";

    List<Role> Roles = ViewData["Roles"] as List<Role>;
}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Add new user</h1>
    </div>
</div>

<div class="container">
    <div class="row">
        
        <form method="post" enctype="multipart/form-data">
        <div class="col-8">
            <div class="mt-3">
                    <input type="text" asp-for="CreateUserViewModel.Username" class="form-control" placeholder="Username">
            </div>
            <div class="mt-3">
                    <input type="text" asp-for="CreateUserViewModel.Email" class="form-control" placeholder="Email">
                </div>
                <div class="mt-3">
                    <input type="text" asp-for="CreateUserViewModel.Password" class="form-control" placeholder="Password">
                </div>
                <div class="mt-3">
                    <img class="img-thumbnail" id="imgAvatar" src="/UserAvatar/default.png"/>
                    <input type="file" asp-for="CreateUserViewModel.UserAvatar" class="form-control" placeholder="User Avatar"/>
                </div>
                <div class="mt-3">
                    @foreach(var item in Roles)
                    {
                        <div class="form-check">
                            <input class="form-check-input" name="SelectedRoles" type="checkbox" value="@item.RoleId" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefault">
                               @item.RoleTitle
                            </label>
                        </div>
                    }
                </div>
                <div class="mt-3">
                    <button type="submit" class="btn btn-primary mb-3">Add</button>
                </div>
        </div>
       
        </form>
       
    </div>
</div>

@section Scripts{
<script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#imgAvatar').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        $("#CreateUserViewModel_UserAvatar").change(function () {
            readURL(this);
        });
</script>
}


